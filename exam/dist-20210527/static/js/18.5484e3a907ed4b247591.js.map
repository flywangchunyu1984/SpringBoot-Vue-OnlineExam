{"version":3,"sources":["webpack:///src/components/student/message.vue","webpack:///./src/components/student/message.vue?6e87","webpack:///./src/components/student/message.vue"],"names":["message","data","flag","current","title","content","pagination","total","size","msg","created","this","getMsg","methods","_this","$axios","then","res","code","records","handleSizeChange","val","handleCurrentChange","submit","_this2","date","Date","length","$message","type","url","method","time","replay","messageId","_this3","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","_ref","value","console","log","replayTime","catch","enter","index","leave","student_message","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","_v","placeholder","clearable","model","callback","$$v","expression","rows","on","click","$event","_l","key","mouseenter","mouseleave","_s","replayData","index2","_e","current-page","page-sizes","page-size","layout","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.5484e3a907ed4b247591.js","sourcesContent":["// 给我留言页面\r\n<template>\r\n  <div id=\"message\">\r\n    <div class=\"title\">给我留言</div>\r\n    <div class=\"wrapper\">\r\n      <div class=\"title1\">\r\n        <el-input\r\n          placeholder=\"留言标题\"\r\n          v-model=\"title\"\r\n          clearable>\r\n        </el-input>\r\n      </div>\r\n      <div class=\"content\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :rows=\"3\"\r\n          placeholder=\"留言内容\"\r\n          v-model=\"content\"\r\n          clearable>\r\n        </el-input>\r\n      </div>\r\n      <div class=\"btn\">\r\n        <el-button type=\"primary\" @click=\"submit()\">提交留言</el-button>\r\n      </div>\r\n      <div class=\"all\">\r\n        <ul class=\"msglist\">\r\n          <li class=\"list\" \r\n          @mouseenter=\"enter(index)\" \r\n          @mouseleave=\"leave(index)\"\r\n          v-for=\"(data,index) in msg\" :key=\"index\"\r\n          >\r\n            <p class=\"title\"> <i class=\"iconfont icon-untitled33\"></i>{{data.title}}</p>\r\n            <p class=\"content\">{{data.content}}</p>\r\n            <p class=\"date\"><i class=\"iconfont icon-date\"></i>{{data.time}}</p>\r\n            <div v-for=\"(replayData,index2) in data.replays\" :key=\"index2\">\r\n              <p class=\"comment\"><i class=\"iconfont icon-huifuxiaoxi\"></i>{{replayData.replay}}</p>\r\n            </div>\r\n            <span class=\"replay\" @click=\"replay(data.id)\" v-if=\"flag && index == current\">Comment</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pagination.current\"\r\n          :page-sizes=\"[4,6,8,10]\"\r\n          :page-size=\"pagination.size\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"pagination.total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  // name: 'message'\r\n  data() {\r\n    return {\r\n      flag: false,\r\n      current: 0,\r\n      title: \"\",\r\n      content: \"\",\r\n      pagination: { //分页后的留言列表\r\n        current: 1, //当前页\r\n        total: null, //记录条数\r\n        size: 4 //每页条数\r\n      },\r\n      msg: []\r\n    }\r\n  },\r\n  created() {\r\n    this.getMsg()\r\n  },\r\n  // watch: {\r\n    \r\n  // },\r\n  methods: {\r\n    getMsg() {\r\n      this.$axios(`/api/messages/${this.pagination.current}/${this.pagination.size}`).then(res => {\r\n        let status = res.data.code\r\n        if(status == 200) {\r\n          this.msg = res.data.data.records\r\n          this.pagination = res.data.data\r\n        }\r\n      })\r\n    },\r\n    //改变当前记录条数\r\n    handleSizeChange(val) {\r\n      this.pagination.size = val\r\n      this.getMsg()\r\n    },\r\n    //改变当前页码，重新发送请求\r\n    handleCurrentChange(val) {\r\n      this.pagination.current = val\r\n      this.getMsg()\r\n    },\r\n    // formatTime(date) { //日期格式化\r\n    //   let year = date.getFullYear()\r\n    //   let month= date.getMonth()+ 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\r\n    //   let day=date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\r\n    //   let hours=date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\r\n    //   let minutes=date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\r\n    //   let seconds=date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n    //   // 拼接\r\n    //   return year+\"-\"+month+\"-\"+day+\" \"+hours+\":\"+minutes+\":\"+seconds;\r\n    // },\r\n    submit() {\r\n      let date = new Date()\r\n      if(this.title.length == 0 || this.content.length == 0) { //非空判断\r\n        this.$message({\r\n          type: 'error',\r\n          message: '留言标题或内容不能为空',\r\n        })\r\n       } else {\r\n      this.$axios({\r\n        url: \"/api/message\",\r\n        method: \"post\",\r\n        data: {\r\n          title: this.title,\r\n          content: this.content,\r\n          time: date\r\n        }\r\n      }).then(res => {\r\n        let code = res.data.code\r\n        if(code == 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"留言成功\"\r\n          })\r\n        }\r\n        this.getMsg()\r\n      })\r\n    }\r\n      this.title = \"\"\r\n      this.content = \"\"\r\n      this.getMsg()\r\n    },\r\n    replay(messageId) { //回复留言功能\r\n      this.$prompt('回复留言', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        inputPattern: /^[\\s\\S]*.*[^\\s][\\s\\S]*$/,\r\n        inputErrorMessage: '回复不能为空'\r\n      }).then(({ value }) => {\r\n        let date = new Date()\r\n        console.log(messageId)\r\n        this.$axios({\r\n          url: '/api/replay',\r\n          method: 'post',\r\n          data: {\r\n            replay: value,\r\n            replayTime: date,\r\n            messageId: messageId\r\n          }\r\n        }).then(res => {\r\n          this.getMsg()\r\n        })\r\n        this.$message({\r\n          type: 'success',\r\n          message: '回复成功'\r\n        });\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消输入'\r\n        });       \r\n      });\r\n    },\r\n    enter(index) {\r\n      this.flag = true\r\n      this.current = index\r\n    },\r\n    leave(index) {\r\n      this.flag = false;\r\n      this.current = index;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n#message {\r\n  width: 980px;\r\n  margin: 0 auto;\r\n}\r\n.title {\r\n  margin: 20px;\r\n}\r\n.content {\r\n  padding: 20px 0px;\r\n}\r\n#message  {\r\n  .btn {\r\n   padding-bottom: 20px;\r\n  }\r\n  .all {\r\n    .date {\r\n      color: rgb(80, 157, 202);\r\n      line-height: 45px;\r\n      font-size: 13px;\r\n    }\r\n    .list {\r\n      background-color: #eee;\r\n      padding:10px;\r\n      border-radius: 4px;\r\n      margin: 10px 0px;\r\n      position: relative;\r\n      transition: all .3s ease;\r\n      .title {\r\n        color: #5f5f5f;\r\n        margin: 0px;\r\n        font-size: 13px;\r\n        line-height: 30px;\r\n      }\r\n      .content {\r\n        padding: 0px;\r\n      }\r\n      .icon-untitled33 {\r\n        font-size: 13px;\r\n        margin-right: 4px;\r\n      }\r\n      .icon-date {\r\n        font-size: 13px;\r\n        margin-right: 4px;\r\n        color: rgb(80, 157, 202);\r\n      }\r\n      .replay {\r\n        position: absolute;\r\n        right: 30px;\r\n        bottom: 15px;\r\n        color: tomato;\r\n        cursor: pointer;\r\n        transition: all .3s ease;\r\n      }\r\n      .comment {\r\n        margin:-7px 0px; \r\n        padding-bottom: 12px;\r\n        font-size: 13px;\r\n        color: #28b2b4;\r\n        i {\r\n          margin-right: 4px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n#message .wrapper {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/student/message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"message\"}},[_c('div',{staticClass:\"title\"},[_vm._v(\"给我留言\")]),_vm._v(\" \"),_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"title1\"},[_c('el-input',{attrs:{\"placeholder\":\"留言标题\",\"clearable\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"留言内容\",\"clearable\":\"\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"提交留言\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"all\"},[_c('ul',{staticClass:\"msglist\"},_vm._l((_vm.msg),function(data,index){return _c('li',{key:index,staticClass:\"list\",on:{\"mouseenter\":function($event){return _vm.enter(index)},\"mouseleave\":function($event){return _vm.leave(index)}}},[_c('p',{staticClass:\"title\"},[_c('i',{staticClass:\"iconfont icon-untitled33\"}),_vm._v(_vm._s(data.title))]),_vm._v(\" \"),_c('p',{staticClass:\"content\"},[_vm._v(_vm._s(data.content))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_c('i',{staticClass:\"iconfont icon-date\"}),_vm._v(_vm._s(data.time))]),_vm._v(\" \"),_vm._l((data.replays),function(replayData,index2){return _c('div',{key:index2},[_c('p',{staticClass:\"comment\"},[_c('i',{staticClass:\"iconfont icon-huifuxiaoxi\"}),_vm._v(_vm._s(replayData.replay))])])}),_vm._v(\" \"),(_vm.flag && index == _vm.current)?_c('span',{staticClass:\"replay\",on:{\"click\":function($event){return _vm.replay(data.id)}}},[_vm._v(\"Comment\")]):_vm._e()],2)}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.current,\"page-sizes\":[4,6,8,10],\"page-size\":_vm.pagination.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2afa2105\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/student/message.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2afa2105\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2afa2105\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2afa2105\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/student/message.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}