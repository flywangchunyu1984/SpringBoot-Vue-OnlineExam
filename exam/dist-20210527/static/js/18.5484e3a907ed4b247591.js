webpackJsonp([18],{ubVG:function(t,e){},x3U5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{flag:!1,current:0,title:"",content:"",pagination:{current:1,total:null,size:4},msg:[]}},created:function(){this.getMsg()},methods:{getMsg:function(){var t=this;this.$axios("/api/messages/"+this.pagination.current+"/"+this.pagination.size).then(function(e){200==e.data.code&&(t.msg=e.data.data.records,t.pagination=e.data.data)})},handleSizeChange:function(t){this.pagination.size=t,this.getMsg()},handleCurrentChange:function(t){this.pagination.current=t,this.getMsg()},submit:function(){var t=this,e=new Date;0==this.title.length||0==this.content.length?this.$message({type:"error",message:"留言标题或内容不能为空"}):this.$axios({url:"/api/message",method:"post",data:{title:this.title,content:this.content,time:e}}).then(function(e){200==e.data.code&&t.$message({type:"success",message:"留言成功"}),t.getMsg()}),this.title="",this.content="",this.getMsg()},replay:function(t){var e=this;this.$prompt("回复留言","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"回复不能为空"}).then(function(n){var a=n.value,s=new Date;console.log(t),e.$axios({url:"/api/replay",method:"post",data:{replay:a,replayTime:s,messageId:t}}).then(function(t){e.getMsg()}),e.$message({type:"success",message:"回复成功"})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},enter:function(t){this.flag=!0,this.current=t},leave:function(t){this.flag=!1,this.current=t}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"message"}},[n("div",{staticClass:"title"},[t._v("给我留言")]),t._v(" "),n("div",{staticClass:"wrapper"},[n("div",{staticClass:"title1"},[n("el-input",{attrs:{placeholder:"留言标题",clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("div",{staticClass:"content"},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"留言内容",clearable:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),n("div",{staticClass:"btn"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交留言")])],1),t._v(" "),n("div",{staticClass:"all"},[n("ul",{staticClass:"msglist"},t._l(t.msg,function(e,a){return n("li",{key:a,staticClass:"list",on:{mouseenter:function(e){return t.enter(a)},mouseleave:function(e){return t.leave(a)}}},[n("p",{staticClass:"title"},[n("i",{staticClass:"iconfont icon-untitled33"}),t._v(t._s(e.title))]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),n("p",{staticClass:"date"},[n("i",{staticClass:"iconfont icon-date"}),t._v(t._s(e.time))]),t._v(" "),t._l(e.replays,function(e,a){return n("div",{key:a},[n("p",{staticClass:"comment"},[n("i",{staticClass:"iconfont icon-huifuxiaoxi"}),t._v(t._s(e.replay))])])}),t._v(" "),t.flag&&a==t.current?n("span",{staticClass:"replay",on:{click:function(n){return t.replay(e.id)}}},[t._v("Comment")]):t._e()],2)}),0)]),t._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":t.pagination.current,"page-sizes":[4,6,8,10],"page-size":t.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},staticRenderFns:[]};var i=n("VU/8")(a,s,!1,function(t){n("ubVG")},"data-v-2afa2105",null);e.default=i.exports}});
//# sourceMappingURL=18.5484e3a907ed4b247591.js.map